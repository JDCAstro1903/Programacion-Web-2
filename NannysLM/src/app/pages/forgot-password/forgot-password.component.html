<div class="forgot-password-container">
  <!-- Sección izquierda - Promocional -->
  <div class="promo-section">
    <div class="promo-content">
      <h1>Recupera tu acceso</h1>
      <p>Te ayudaremos a restablecer tu contraseña en pocos pasos. Es rápido y seguro.</p>
    </div>
    <button class="back-button" (click)="goToLogin()">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </button>
  </div>

  <!-- Sección derecha - Formulario -->
  <div class="form-section">
    <div class="form-container">

      <!-- PASO 1: Solicitar email -->
      <div *ngIf="step === 'email'" class="form-content">
        <div class="header">
          <h2>¿Olvidaste tu contraseña?</h2>
          <p class="subtitle">Ingresa el correo asociado a tu cuenta y te enviaremos un enlace para restablecerla.</p>
        </div>

        <!-- Mensaje -->
        <div *ngIf="message" [ngClass]="'alert alert-' + messageType">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
            <path *ngIf="messageType === 'error'" d="M15 9L9 15M9 9L15 15" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <path *ngIf="messageType === 'success'" d="M9 12L11 14L15 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          {{ message }}
        </div>

        <form (ngSubmit)="submitForgotPassword()" class="email-form">
          <div class="input-group">
            <label for="email">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect x="2" y="4" width="20" height="16" rx="2" stroke="currentColor" stroke-width="2"/>
                <path d="M2 6L12 13L22 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              Correo electrónico
            </label>
            <input 
              type="email" 
              id="email" 
              [(ngModel)]="email" 
              name="email"
              placeholder="tu@email.com"
              autocomplete="email"
              [disabled]="isLoading">
          </div>

          <button 
            type="submit" 
            class="submit-button"
            [disabled]="isLoading">
            <span *ngIf="!isLoading">Enviar enlace de recuperación</span>
            <span *ngIf="isLoading" class="loading-content">
              <svg class="spinner" width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" stroke-dasharray="15.7 47.1"/>
              </svg>
              Enviando...
            </span>
          </button>
        </form>

        <div class="footer-links">
          <p>¿Recuerdas tu contraseña?</p>
          <a routerLink="/login" class="link">Volver al login</a>
        </div>
      </div>

      <!-- PASO 2: Éxito -->
      <div *ngIf="step === 'success'" class="form-content success-view">
        <div class="success-icon-wrapper">
          <svg width="80" height="80" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="12" cy="12" r="10" fill="#10B981" stroke="#10B981" stroke-width="2"/>
            <path d="M9 12L11 14L15 10" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>

        <div class="success-content">
          <h2>Solicitud enviada</h2>
          <p class="email-display">Hemos enviado un enlace de recuperación a:</p>
          <p class="email-highlight">{{ email }}</p>

          <div class="instructions">
            <h3>Próximos pasos:</h3>
            <ol>
              <li>Revisa tu correo (incluyendo la carpeta de spam)</li>
              <li>Haz clic en el enlace "Restablecer contraseña"</li>
              <li>Crea una nueva contraseña segura</li>
              <li>Inicia sesión con tu nueva contraseña</li>
            </ol>
          </div>

          <div class="alert alert-info">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
              <line x1="12" y1="8" x2="12" y2="12" stroke="currentColor" stroke-width="2"/>
              <line x1="12" y1="16" x2="12.01" y2="16" stroke="currentColor" stroke-width="2"/>
            </svg>
            <span>El enlace expira en 1 hora por razones de seguridad</span>
          </div>

          <div class="success-actions">
            <button class="primary-button" (click)="goToLogin()">Ir a login</button>
            <button class="secondary-button" (click)="tryAgain()">Solicitar otro enlace</button>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>
