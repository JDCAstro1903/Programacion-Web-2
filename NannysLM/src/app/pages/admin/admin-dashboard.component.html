<div class="admin-layout">
  <!-- Header -->
  <header class="admin-header">
    <div class="header-left">
      <div class="logo-section">
        <img src="/assets/logo.png" alt="NannysLM" class="logo">
        <div class="brand-info">
          <h1>NannysLM</h1>
          <p>Panel de administrador</p>
        </div>
      </div>
    </div>
    
    <div class="header-right">
      <div class="user-info">
        <span class="user-name">{{ currentUser.name }}</span>
        <span class="user-role">{{ currentUser.role }}</span>
        <div class="user-avatar">
          <img [src]="currentUser.avatar" alt="Avatar">
        </div>
      </div>
    </div>
  </header>

  <!-- Layout principal -->
  <div class="main-layout">
    <!-- Sidebar Reutilizable -->
    <app-sidebar 
      [config]="sidebarConfig" 
      [currentView]="currentView"
      (onViewChange)="onViewChange($event)"
      (onLogoutClick)="onSidebarLogout()">
    </app-sidebar>

    <!-- Contenido principal -->
    <main class="main-content">
      <!-- Vista Dashboard -->
      <div *ngIf="currentView === 'dashboard'">
        <div class="content-header">
          <h2>Dashboard</h2>
          <p>Resumen general de la plataforma</p>
        </div>
        
        <div class="stats-grid">
          <!-- Nannys disponibles -->
          <div class="stat-card nannys-card">
            <div class="stat-icon">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="12" cy="8" r="7" stroke="currentColor" stroke-width="2"/>
                <polyline points="8.21,13.89 7,23 12,20 17,23 15.79,13.88" stroke="currentColor" stroke-width="2"/>
              </svg>
            </div>
            <div class="stat-content">
              <div class="stat-label">
                Nannys disponibles
              </div>
              <div class="stat-number">{{ stats.nanniesAvailable }}</div>
            </div>
          </div>

          <!-- Clientes verificados -->
          <div class="stat-card verified-card">
            <div class="stat-icon">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
            <div class="stat-content">
              <div class="stat-label">
                Clientes verificados
              </div>
              <div class="stat-number">{{ stats.verifiedClients }}</div>
            </div>
          </div>

          <!-- Clientes sin verificar -->
          <div class="stat-card unverified-card">
            <div class="stat-icon">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                <line x1="12" y1="8" x2="12" y2="12" stroke="currentColor" stroke-width="2"/>
                <line x1="12" y1="16" x2="12.01" y2="16" stroke="currentColor" stroke-width="2"/>
              </svg>
            </div>
            <div class="stat-content">
              <div class="stat-label">
                Clientes sin verificar
              </div>
              <div class="stat-number">{{ stats.unverifiedClients }}</div>
            </div>
          </div>

          <!-- Pagos del mes -->
          <div class="stat-card revenue-card">
            <div class="stat-icon">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <polyline points="14,2 14,8 20,8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <line x1="16" y1="13" x2="8" y2="13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <line x1="16" y1="17" x2="8" y2="17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
            <div class="stat-content">
              <div class="stat-label">
                Pagos del mes
              </div>
              <div class="stat-number">${{ stats.monthlyRevenue.toLocaleString() }}</div>
            </div>
          </div>
        </div>
        
        <!-- √Årea adicional para futuras funcionalidades -->
        <div class="additional-content">
          <div class="content-placeholder">
            <h3> Dashboard en desarrollo</h3>
            </div>
        </div>
            </div>


      <!-- Vista Nannys -->
      <div *ngIf="currentView === 'nannys'">
        <div class="content-header">
          <h2>Nannys</h2>
          <p>Gesti√≥n de cuidadoras</p>
        </div>
        
        <!-- Filtros de estado -->
        <div class="filter-tabs">
          <button 
            (click)="setNannyFilter('active')" 
            class="filter-tab success"
            [class.active]="nannyFilter === 'active'">
            <div class="tab-icon success">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
            <span>Nannys activas</span>
          </button>
          
          <button 
            (click)="setNannyFilter('inactive')" 
            class="filter-tab danger"
            [class.active]="nannyFilter === 'inactive'">
            <div class="tab-icon danger">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                <line x1="15" y1="9" x2="9" y2="15" stroke="currentColor" stroke-width="2"/>
                <line x1="9" y1="9" x2="15" y2="15" stroke="currentColor" stroke-width="2"/>
              </svg>
            </div>
            <span>Nannys Inactivas</span>
          </button>
          
          <button 
            (click)="setNannyFilter('busy')" 
            class="filter-tab info"
            [class.active]="nannyFilter === 'busy'">
            <div class="tab-icon info">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2" stroke="currentColor" stroke-width="2"/>
                <line x1="16" y1="2" x2="16" y2="6" stroke="currentColor" stroke-width="2"/>
                <line x1="8" y1="2" x2="8" y2="6" stroke="currentColor" stroke-width="2"/>
                <line x1="3" y1="10" x2="21" y2="10" stroke="currentColor" stroke-width="2"/>
              </svg>
            </div>
            <span>Nannys ocupadas</span>
          </button>
        </div>

        <!-- Lista de Nannys -->
        <div class="nannys-content">
          <div class="nannys-list">
            <div *ngFor="let nanny of getCurrentNannys()" class="nanny-card">
              <div class="nanny-avatar">
                <div class="avatar-placeholder">
                  {{ nanny.name.charAt(0) }}
                </div>
                <div class="status-indicator" [class]="nannyFilter"></div>
              </div>
              
              <div class="nanny-info">
                <h4>{{ nanny.name }}</h4>
                <div class="nanny-details">
                  <span class="rating">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M12 2L15.09 8.26L22 9L17 14L18.18 21L12 17.77L5.82 21L7 14L2 9L8.91 8.26L12 2Z" fill="#fbbf24"/>
                    </svg>
                    {{ nanny.rating }}
                  </span>
                  <span class="experience">{{ nanny.experience }} a√±os exp.</span>
                  <span class="location">{{ nanny.location }}</span>
                </div>
              </div>
              
              <div class="nanny-rate">
                <span class="rate-amount">{{ nanny.hourlyRate }}‚Ç¨/h</span>
              </div>
              
              <div class="nanny-actions">
                <button class="action-btn primary">Ver perfil</button>
                <button class="action-btn secondary">Contactar</button>
              </div>
            </div>
          </div>
          
          <!-- Estado vac√≠o si no hay nannys en la categor√≠a -->
          <div *ngIf="getCurrentNannys().length === 0" class="empty-state">
            <div class="empty-icon">üîç</div>
            <h3>No hay cuidadoras en esta categor√≠a</h3>
            <p>No se encontraron cuidadoras con el filtro seleccionado.</p>
          </div>
        </div>
      </div>

      <!-- Vista Clientes -->
      <div *ngIf="currentView === 'clients'">
        <div class="content-header">
          <h2>Clientes</h2>
          <p>Gesti√≥n de clientes</p>
        </div>
        
        <!-- Filtros de estado -->
        <div class="filter-tabs">
          <button 
            (click)="setClientFilter('verified')" 
            class="filter-tab success"
            [class.active]="clientFilter === 'verified'">
            <div class="tab-icon success">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
            <span>Clientes verificados</span>
          </button>
          
          <button 
            (click)="setClientFilter('unverified')" 
            class="filter-tab danger"
            [class.active]="clientFilter === 'unverified'">
            <div class="tab-icon danger">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                <line x1="15" y1="9" x2="9" y2="15" stroke="currentColor" stroke-width="2"/>
                <line x1="9" y1="9" x2="15" y2="15" stroke="currentColor" stroke-width="2"/>
              </svg>
            </div>
            <span>Clientes sin verificar</span>
          </button>
        </div>

        <!-- Lista de Clientes -->
        <div class="clients-content">
          <div class="clients-list">
            <div *ngFor="let client of getCurrentClients()" class="client-card">
              <div class="client-avatar">
                <div class="avatar-placeholder">
                  {{ client.name.charAt(0) }}
                </div>
                <div class="status-indicator" [class]="clientFilter"></div>
              </div>
              
              <div class="client-info">
                <h4>{{ client.name }}</h4>
                <div class="client-details">
                  <span class="email">{{ client.email }}</span>
                  <span class="phone">{{ client.phone }}</span>
                  <span class="location">{{ client.location }}</span>
                  <span class="children">{{ client.children }} ni√±o{{ client.children > 1 ? 's' : '' }}</span>
                </div>
              </div>
              
              <div class="client-status">
                <span class="member-since">Miembro desde: {{ client.memberSince }}</span>
                <span class="status-badge" [class]="clientFilter">
                  {{ clientFilter === 'verified' ? 'Verificado' : 'Sin verificar' }}
                </span>
              </div>
              
              <div class="client-actions">
                <button class="action-btn primary">Ver perfil</button>
                <button class="action-btn secondary" *ngIf="clientFilter === 'unverified'">Verificar</button>
                <button class="action-btn secondary" *ngIf="clientFilter === 'verified'">Contactar</button>
              </div>
            </div>
          </div>
          
          <!-- Estado vac√≠o si no hay clientes en la categor√≠a -->
          <div *ngIf="getCurrentClients().length === 0" class="empty-state">
            <div class="empty-icon">üîç</div>
            <h3>No hay clientes en esta categor√≠a</h3>
            <p>No se encontraron clientes con el filtro seleccionado.</p>
          </div>
        </div>
      </div>

      <!-- Vista Pagos -->
      <div *ngIf="currentView === 'payments'">
        <div class="content-header">
          <h2>Pagos</h2>
          <p>Gesti√≥n de pagos</p>
        </div>
        
        <!-- Filtros de estado con bot√≥n desplegable -->
        <div class="filter-tabs-container">
          <div class="filter-tabs">
            <button 
              (click)="setPaymentFilter('verified')" 
              class="filter-tab success"
              [class.active]="paymentFilter === 'verified'">
              <div class="tab-icon success">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </div>
              <span>Pagos verificados</span>
            </button>
            
            <button 
              (click)="setPaymentFilter('unverified')" 
              class="filter-tab danger"
              [class.active]="paymentFilter === 'unverified'">
              <div class="tab-icon danger">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                  <line x1="15" y1="9" x2="9" y2="15" stroke="currentColor" stroke-width="2"/>
                  <line x1="9" y1="9" x2="15" y2="15" stroke="currentColor" stroke-width="2"/>
                </svg>
              </div>
              <span>pagos sin verificar</span>
            </button>
          </div>
          
          <!-- Bot√≥n desplegable para filtros de fecha -->
          <button class="dropdown-toggle-btn" (click)="toggleDateFilters()">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <rect x="3" y="4" width="18" height="18" rx="2" ry="2" stroke="currentColor" stroke-width="2"/>
              <line x1="16" y1="2" x2="16" y2="6" stroke="currentColor" stroke-width="2"/>
              <line x1="8" y1="2" x2="8" y2="6" stroke="currentColor" stroke-width="2"/>
              <line x1="3" y1="10" x2="21" y2="10" stroke="currentColor" stroke-width="2"/>
            </svg>
            <span>Filtrar por fecha</span>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" 
                 [style.transform]="showDateFilters ? 'rotate(180deg)' : 'rotate(0deg)'"
                 style="transition: transform 0.3s ease;">
              <polyline points="6,9 12,15 18,9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
        </div>

        <!-- Filtros de fecha (desplegables) -->
        <div class="date-filter-section" 
             [class.expanded]="showDateFilters">
          <h4>Filtrar por fecha:</h4>
          <div class="date-filter-tabs">
            <button 
              (click)="setPaymentDateFilter('all')" 
              class="date-filter-tab"
              [class.active]="paymentDateFilter === 'all'">
              <span>Todos ({{ getPaymentCountByDate('all') }})</span>
            </button>
            
            <button 
              (click)="setPaymentDateFilter('today')" 
              class="date-filter-tab"
              [class.active]="paymentDateFilter === 'today'">
              <span>Hoy ({{ getPaymentCountByDate('today') }})</span>
            </button>
            
            <button 
              (click)="setPaymentDateFilter('week')" 
              class="date-filter-tab"
              [class.active]="paymentDateFilter === 'week'">
              <span>√öltima semana ({{ getPaymentCountByDate('week') }})</span>
            </button>
            
            <button 
              (click)="setPaymentDateFilter('month')" 
              class="date-filter-tab"
              [class.active]="paymentDateFilter === 'month'">
              <span>√öltimo mes ({{ getPaymentCountByDate('month') }})</span>
            </button>
            
            <button 
              (click)="setPaymentDateFilter('quarter')" 
              class="date-filter-tab"
              [class.active]="paymentDateFilter === 'quarter'">
              <span>√öltimo trimestre ({{ getPaymentCountByDate('quarter') }})</span>
            </button>
          </div>
        </div>

        <!-- Lista de Pagos -->
        <div class="payments-content">
          <div class="payments-list">
            <div *ngFor="let payment of getCurrentPayments()" class="payment-card">
              <div class="payment-info">
                <h4>Pago #{{ payment.id }}</h4>
                <div class="payment-details">
                  <span class="client-name">Cliente: {{ payment.clientName }}</span>
                  <span class="nanny-name">Nanny: {{ payment.nannyName }}</span>
                  <span class="date">Fecha: {{ payment.date }}</span>
                  <span class="hours">{{ payment.hours }} horas de servicio</span>
                </div>
              </div>
              
              <div class="payment-amount">
                <span class="amount">{{ payment.amount }}‚Ç¨</span>
                <span class="status-badge" [class]="paymentFilter">
                  {{ paymentFilter === 'verified' ? 'Completado' : 'Pendiente' }}
                </span>
              </div>
              
              <div class="payment-actions">
                <button class="action-btn primary">Ver detalles</button>
                <button class="action-btn secondary" *ngIf="paymentFilter === 'unverified'">Verificar</button>
                <button class="action-btn secondary" *ngIf="paymentFilter === 'verified'">Recibo</button>
              </div>
            </div>
          </div>
          
          <!-- Estado vac√≠o si no hay pagos en la categor√≠a -->
          <div *ngIf="getCurrentPayments().length === 0" class="empty-state">
            <div class="empty-icon">üîç</div>
            <h3>No hay pagos en esta categor√≠a</h3>
            <p>No se encontraron pagos con los filtros seleccionados.</p>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- Modal de confirmaci√≥n para cerrar sesi√≥n -->
  <!-- Modal de logout reutilizable -->
  <app-logout-modal 
    [isVisible]="showLogoutModal"
    [userName]="currentUser.name"
    [userRole]="currentUser.role"
    [redirectRoute]="'/user-selection'"
    (onCancel)="closeLogoutModal()"
    (onConfirm)="confirmLogout()">
  </app-logout-modal>
</div>