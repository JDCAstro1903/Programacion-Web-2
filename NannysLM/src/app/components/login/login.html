<div class="login-container">
  <!-- Sección izquierda con el mensaje promocional -->
  <div class="promo-section">
    <div class="promo-content">
      <h1>Contactamos familias con cuidadores de confianza</h1>
      <p>La plataforma mas segura y confiable para encontrar la niñera perfecta para tu familia</p>
    </div>
    <button class="back-button" routerLink="/">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </button>
  </div>

  <!-- Sección derecha con el formulario de login -->
  <div class="form-section">
    <div class="form-container">

      <h2>Bienvenido de vuelta</h2>
      <p class="subtitle">Inicia sesión para encontrar la niñera perfecta</p>

      <!-- Mensaje de éxito -->
      <div *ngIf="successMessage" class="alert alert-success">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        {{ successMessage }}
      </div>

      <!-- Error general -->
      <div *ngIf="errors.general" class="alert alert-error">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
          <line x1="15" y1="9" x2="9" y2="15" stroke="currentColor" stroke-width="2"/>
          <line x1="9" y1="9" x2="15" y2="15" stroke="currentColor" stroke-width="2"/>
        </svg>
        {{ errors.general }}
      </div>

      <form (ngSubmit)="onSubmit()" class="login-form">
        <div class="input-group">
          <label for="email">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M4 4H20C21.1 4 22 4.9 22 6V18C22 19.1 21.1 20 20 20H4C2.9 20 2 19.1 2 18V6C2 4.9 2.9 4 4 4Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <polyline points="22,6 12,13 2,6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            Correo electrónico
          </label>
          <input 
            type="email" 
            id="email" 
            [(ngModel)]="email" 
            name="email"
            required
            [class.error]="errors.email"
            placeholder="tu@email.com">
          <div *ngIf="errors.email" class="error-message">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
              <line x1="15" y1="9" x2="9" y2="15" stroke="currentColor" stroke-width="2"/>
              <line x1="9" y1="9" x2="15" y2="15" stroke="currentColor" stroke-width="2"/>
            </svg>
            {{ errors.email }}
          </div>
        </div>

        <div class="input-group">
          <label for="password">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <rect x="3" y="11" width="18" height="11" rx="2" ry="2" stroke="currentColor" stroke-width="2"/>
              <path d="M7 11V7C7 5.67392 7.52678 4.40215 8.46447 3.46447C9.40215 2.52678 10.6739 2 12 2C13.3261 2 14.5979 2.52678 15.5355 3.46447C16.4732 4.40215 17 5.67392 17 7V11" stroke="currentColor" stroke-width="2"/>
            </svg>
            Contraseña
          </label>
          <div class="password-input-container">
            <input 
              [type]="showPassword ? 'text' : 'password'" 
              id="password" 
              [(ngModel)]="password" 
              name="password"
              required
              [class.error]="errors.password"
              placeholder="••••••••">
            <button 
              type="button" 
              class="password-toggle"
              (click)="togglePasswordVisibility()"
              [attr.aria-label]="showPassword ? 'Ocultar contraseña' : 'Mostrar contraseña'">
              <!-- Ojo abierto (mostrar) -->
              <svg *ngIf="!showPassword" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M1 12S5 4 12 4S23 12 23 12S19 20 12 20S1 12 1 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <!-- Ojo cerrado (ocultar) -->
              <svg *ngIf="showPassword" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20C5 20 1 12 1 12A16.16 16.16 0 0 1 6.06 6.06L17.94 17.94Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M9.9 4.24A9.12 9.12 0 0 1 12 4C19 4 23 12 23 12A16.16 16.16 0 0 0 19.94 17.94L9.9 4.24Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <line x1="1" y1="1" x2="23" y2="23" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </button>
          </div>
          <div *ngIf="errors.password" class="error-message">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
              <line x1="15" y1="9" x2="9" y2="15" stroke="currentColor" stroke-width="2"/>
              <line x1="9" y1="9" x2="15" y2="15" stroke="currentColor" stroke-width="2"/>
            </svg>
            {{ errors.password }}
          </div>
        </div>

        <div class="form-options">
          <label class="checkbox-container">
            <input 
              type="checkbox" 
              [(ngModel)]="rememberMe" 
              name="rememberMe">
            <span class="checkmark"></span>
            recordarme
          </label>
          <a href="#" class="forgot-link" (click)="onForgotPassword()">¿Olvidaste tu contraseña?</a>
        </div>

        <button 
          type="submit" 
          class="login-button"
          [disabled]="isLoading">
          <span *ngIf="!isLoading">Iniciar sesión</span>
          <span *ngIf="isLoading" class="loading-content">
            <svg class="spinner" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 2V6M12 18V22M4.93 4.93L7.76 7.76M16.24 16.24L19.07 19.07M2 12H6M18 12H22M4.93 19.07L7.76 16.24M16.24 7.76L19.07 4.93" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            Iniciando sesión...
          </span>
        </button>
      </form>

      <div class="register-section">
        <p>¿No tienes cuenta?</p>
        <a routerLink="/register" class="register-link">Regístrate aquí</a>
      </div>
    </div>
  </div>
</div>

<!-- Modal de carga -->
<div *ngIf="showLoadingModal" class="modal-overlay">
  <div class="loading-modal">
    <div class="loading-icon">
      <svg class="spinner-large" width="60" height="60" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M12 2V6M12 18V22M4.93 4.93L7.76 7.76M16.24 16.24L19.07 19.07M2 12H6M18 12H22M4.93 19.07L7.76 16.24M16.24 7.76L19.07 4.93" stroke="#1EB2E5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </div>
    <h3>Iniciando sesión...</h3>
    <p>Verificando tus credenciales</p>
  </div>
</div>

<!-- Modal de éxito -->
<div *ngIf="showSuccessModal" class="modal-overlay" (click)="closeSuccessModal()">
  <div class="success-modal" (click)="$event.stopPropagation()">
    <div class="success-icon">
      <svg width="60" height="60" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="12" cy="12" r="10" fill="#10B981" stroke="#10B981" stroke-width="2"/>
        <path d="M9 12L11 14L15 10" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </div>
    <h3>¡Bienvenido de vuelta!</h3>
    <p>Has iniciado sesión exitosamente. Serás redirigido a tu dashboard.</p>
    <div class="user-info" *ngIf="userInfo">
      <p><strong>{{ userInfo.first_name }} {{ userInfo.last_name }}</strong></p>
      <span class="user-role">{{ getUserRoleText(userInfo.user_type) }}</span>
    </div>
  </div>
</div>